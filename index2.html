<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>월간 도덕 가을편: 수업 사례 및 아이디어 나눔 (밝은 테마)</title>
    <!-- Tailwind CSS CDN 로드 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 폰트 변경: Noto Sans KR */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap');
        body {
            font-family: 'Noto Sans KR', sans-serif; /* 한국어 폰트 유지 */
            background-color: #f9fafb; /* bg-gray-50과 유사한 밝은 배경 */
        }
        /* -- 폭죽 캔버스 스타일 -- */
        #fireworksCanvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1; /* 배경 레이어 */
            pointer-events: none; /* 마우스 이벤트 무시하고 아래 요소로 통과 */
            background-color: transparent; 
        }
        /* 기존 콘텐츠는 캔버스 위에 위치하도록 z-index 설정 */
        header, main, footer {
            position: relative;
            z-index: 10; 
        }
        /* -- 카드 및 버튼 스타일 (새로운 테마색 적용) -- */
        .card-shadow {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.03);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .card-shadow:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .ai-tool-card:hover .ai-tool-info {
            opacity: 1;
            transform: translateY(0);
        }
        .game-btn {
            @apply p-4 rounded-xl font-bold text-white shadow-md transition duration-300;
        }
        .game-btn-A {
            @apply bg-indigo-500 hover:bg-indigo-600; /* 인디고 계열 */
        }
        .game-btn-B {
            @apply bg-teal-500 hover:bg-teal-600; /* 청록 계열 */
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen antialiased">
    <!-- 폭죽 캔버스 추가 (z-index: 1) -->
    <canvas id="fireworksCanvas"></canvas>

    <!-- Header & Hero Section (밝은 배경, z-index: 10) -->
    <header class="bg-white text-gray-900 py-12 shadow-lg border-b border-gray-100">
        <div class="container mx-auto px-4 text-center">
            <p class="text-xl font-medium mb-3 opacity-90 text-indigo-600">🍯 허니쌤과 함께하는</p>
            <h1 class="text-5xl md:text-6xl font-extrabold mb-4 tracking-tight">
                월간 도덕 가을편
            </h1>
            <h2 class="text-3xl md:text-4xl font-light mb-8 bg-indigo-100 text-indigo-800 inline-block px-4 py-2 rounded-xl shadow-xl">
                수업 사례 및 아이디어 나눔
            </h2>
            
            <!-- Key Info Box -->
            <div class="bg-indigo-50 text-indigo-900 p-6 md:p-8 rounded-2xl max-w-lg mx-auto shadow-2xl border-2 border-indigo-100">
                <p class="text-lg font-bold mb-3">🗓️ 연수 일시:</p>
                <p class="text-4xl font-extrabold mb-1">10월 22일(수)</p>
                <p class="text-3xl font-bold border-b-2 border-indigo-400 pb-3 mb-4">19:30 ~ 21:30</p>
                
                <!-- Countdown Timer -->
                <div id="countdown" class="text-xl font-semibold mt-4">
                    <p class="text-xl mb-2">연수 시작까지 남은 시간:</p>
                    <div id="timer-display" class="flex justify-center space-x-4">
                        <span class="p-3 rounded-lg bg-indigo-200 text-3xl font-bold shadow-md" id="days">00<span class="block text-sm font-normal">일</span></span>
                        <span class="p-3 rounded-lg bg-indigo-200 text-3xl font-bold shadow-md" id="hours">00<span class="block text-sm font-normal">시간</span></span>
                        <span class="p-3 rounded-lg bg-indigo-200 text-3xl font-bold shadow-md" id="minutes">00<span class="block text-sm font-normal">분</span></span>
                        <span class="p-3 rounded-lg bg-indigo-200 text-3xl font-bold shadow-md" id="seconds">00<span class="block text-sm font-normal">초</span></span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content (z-index: 10) -->
    <main class="container mx-auto px-4 py-16">
        
        <!-- Section 1: 연수의 핵심 (What is it?) -->
        <section class="mb-16">
            <h3 class="text-4xl font-extrabold text-indigo-700 mb-8 text-center">
                <span class="border-b-4 border-indigo-500 pb-1">✅ 어떤 연수인가요?</span>
            </h3>
            <div class="grid md:grid-cols-3 gap-8">
                <!-- Card 1: 주제 -->
                <div class="bg-white p-6 rounded-xl card-shadow border-t-4 border-pink-500">
                    <h4 class="text-2xl font-bold text-pink-600 mb-3">메인 테마: 인권과 공존</h4>
                    <p class="text-gray-600">2025년 월간 도덕 가을편 주제인 <strong>‘인권과 공존’</strong>을 중심으로, 학생이 직접 묻고 탐구하는 질문 기반 도덕 수업 사례를 깊이 있게 나눕니다.</p>
                </div>
                <!-- Card 2: AI·에듀테크 실습 -->
                <div class="bg-white p-6 rounded-xl card-shadow border-t-4 border-indigo-500">
                    <h4 class="text-2xl font-bold text-indigo-600 mb-3">AI·에듀테크 디자인 실습</h4>
                    <p class="text-gray-600">Canva, Gemini, 바이브코딩을 활용하여 <strong>AI·에듀테크 도구 실습</strong>을 진행하고, 교실 속 참여형 수업 아이디어를 직접 디자인해봅니다.</p>
                </div>
                <!-- Card 3: 수업 혁신 전략 -->
                <div class="bg-white p-6 rounded-xl card-shadow border-t-4 border-teal-500">
                    <h4 class="text-2xl font-bold text-teal-600 mb-3">효율과 참여의 혁신</h4>
                    <p class="text-gray-600">수업 준비 부담은 줄이면서, 학생의 참여와 사고를 획기적으로 확장시키는 <strong>도덕 수업 혁신 전략</strong>을 경험할 수 있습니다.</p>
                </div>
            </div>
        </section>

        <!-- Section 2: 수강 대상 (Who should attend?) -->
        <section class="mb-16">
            <h3 class="text-4xl font-extrabold text-indigo-700 mb-8 text-center">
                <span class="border-b-4 border-indigo-500 pb-1">🙋 어떤 분이 들으면 좋을까요?</span>
            </h3>
            <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Target Card 1 -->
                <div class="bg-white p-5 rounded-xl card-shadow hover:bg-pink-50 transition duration-300">
                    <p class="text-3xl mb-2">❤️</p>
                    <p class="font-semibold text-lg text-gray-700">인권·공존 단원을 학생 중심으로 구성하고 싶은 선생님</p>
                </div>
                <!-- Target Card 2 -->
                <div class="bg-white p-5 rounded-xl card-shadow hover:bg-yellow-50 transition duration-300">
                    <p class="text-3xl mb-2">❓</p>
                    <p class="font-semibold text-lg text-gray-700">질문 기반 탐구학습(QBL)을 수업에 적용해보고 싶은 선생님</p>
                </div>
                <!-- Target Card 3 -->
                <div class="bg-white p-5 rounded-xl card-shadow hover:bg-blue-50 transition duration-300">
                    <p class="text-3xl mb-2">💻</p>
                    <p class="font-semibold text-lg text-gray-700">AI·에듀테크 도구(Canva, Gemini 등) 실습 중심으로 배우고 싶은 선생님</p>
                </div>
                <!-- Target Card 4 -->
                <div class="bg-white p-5 rounded-xl card-shadow hover:bg-green-50 transition duration-300">
                    <p class="text-3xl mb-2">⏰</p>
                    <p class="font-semibold text-lg text-gray-700">수업 효율과 학생 참여를 모두 잡고 싶은 선생님</p>
                </div>
            </div>
        </section>

        <!-- Section 4: 인권/공존 미니 게임 -->
        <section class="mb-16" id="game-section">
            <h3 class="text-4xl font-extrabold text-indigo-700 mb-8 text-center">
                <span class="border-b-4 border-indigo-500 pb-1">🤝 공존의 딜레마 미니 게임</span>
            </h3>
            <!-- 게임 카드 배경도 밝게 유지 -->
            <div class="bg-white p-8 rounded-xl max-w-2xl mx-auto card-shadow border-t-8 border-indigo-500">
                <p class="text-lg text-gray-600 mb-6 text-center">연수 주제인 '인권과 공존' 및 '에듀테크 활용'과 관련된 딜레마 상황을 통해 시각을 넓혀보세요. (총 5문제)</p>
                
                <div id="dilemma-container">
                    <h4 class="text-2xl font-bold text-indigo-900 mb-4 text-center">문제 <span id="current-question">1</span></h4>
                    
                    <!-- 딜레마 상황 표시 영역 -->
                    <div class="bg-indigo-50 p-6 rounded-lg mb-6 border border-indigo-200">
                        <p id="scenario-text" class="text-xl font-medium text-gray-800 text-center">
                            로딩 중...
                        </p>
                    </div>

                    <!-- 선택 버튼 영역 -->
                    <div id="choice-buttons" class="flex flex-col space-y-4">
                        <button id="btn-optionA" class="game-btn game-btn-A" onclick="handleChoice('A')">선택지 A</button>
                        <button id="btn-optionB" class="game-btn game-btn-B" onclick="handleChoice('B')">선택지 B</button>
                    </div>
                </div>

                <!-- 결과 및 회고 영역 (초기에는 숨김) -->
                <div id="result-area" class="mt-8 p-6 bg-pink-50 rounded-lg border-2 border-pink-300 hidden">
                    <h4 class="text-xl font-bold text-pink-700 mb-3 text-center">✨ 허니쌤의 회고 메시지 ✨</h4>
                    <p id="reflection-text" class="text-gray-700 leading-relaxed"></p>
                    <button id="next-button" class="mt-4 w-full p-3 rounded-lg bg-indigo-500 text-white font-bold hover:bg-indigo-600 transition duration-300" onclick="loadNextDilemma()">다음 문제로</button>
                </div>

            </div>
        </section>
        
        <!-- Section 3: 연수 내용 & AI Tool Interaction -->
        <section class="mb-16">
            <h3 class="text-4xl font-extrabold text-indigo-700 mb-8 text-center">
                <span class="border-b-4 border-indigo-500 pb-1">💡 연수 내용: AI 수업 디자인 실습</span>
            </h3>
            
            <div class="bg-indigo-50 p-8 rounded-xl shadow-inner mb-8">
                <h4 class="text-2xl font-bold text-indigo-900 mb-4">주요 학습 내용 (AI 융합 실습)</h4>
                <ul class="space-y-3 text-lg text-gray-700 list-inside">
                    <li class="flex items-start">
                        <svg class="w-6 h-6 mt-1 mr-2 text-pink-500 shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                        <span class="font-medium">
                            <strong class="text-pink-700">[Gemini + Canva]</strong> 활용: 수업 동기유발 및 몰입을 위한 서사 웹사이트/활동지 디자인
                        </span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-6 h-6 mt-1 mr-2 text-teal-500 shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                        <span class="font-medium">
                            <strong class="text-teal-700">[Gemini]</strong> 활용: 질문 기반 탐구학습(QBL)을 위한 심층적인 질문 설계 및 탐구자료 빌드업
                        </span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-6 h-6 mt-1 mr-2 text-indigo-500 shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                        <span class="font-medium">
                            <strong class="text-indigo-700">[바이브코딩]</strong> 활용: 도덕 개념을 활용한 간단한 인터랙티브 게임 제작 및 코딩 교육 융합
                        </span>
                    </li>
                </ul>
            </div>

            <h4 class="text-2xl font-bold text-gray-700 mb-4 text-center">실습 핵심 도구 (클릭하여 연계 역할 확인)</h4>
            
            <!-- Interactive AI Tool Cards -->
            <div class="grid md:grid-cols-3 gap-6">
                
                <!-- Tool 1: Canva (업데이트) -->
                <div class="ai-tool-card relative bg-white p-6 rounded-xl border-4 border-pink-300 shadow-lg cursor-pointer transition duration-300 ease-in-out hover:border-pink-500 hover:shadow-xl" onclick="toggleToolInfo('canva')">
                    <h5 class="text-3xl font-black text-pink-700 text-center">CANVA</h5>
                    <p class="text-center text-sm font-medium text-gray-500 mt-1">#시각화 #웹사이트디자인</p>
                    
                    <div id="canva-info" class="ai-tool-info absolute inset-0 bg-pink-100/95 flex items-center justify-center p-4 rounded-xl text-center transition duration-500 ease-in-out opacity-0 transform translate-y-2 pointer-events-none">
                        <p class="text-pink-800 font-semibold text-lg">
                            <strong>[Gemini 협업]</strong> Gemini가 생성한 서사를 기반으로, 동기유발용 <strong>수업 서사 웹사이트 및 활동지를 시각적으로 디자인</strong>하는 역할
                        </p>
                    </div>
                </div>

                <!-- Tool 2: Gemini (업데이트) -->
                <div class="ai-tool-card relative bg-white p-6 rounded-xl border-4 border-teal-300 shadow-lg cursor-pointer transition duration-300 ease-in-out hover:border-teal-500 hover:shadow-xl" onclick="toggleToolInfo('gemini')">
                    <h5 class="text-3xl font-black text-teal-700 text-center">GEMINI</h5>
                    <p class="text-center text-sm font-medium text-gray-500 mt-1">#질문생성 #서사생성</p>
                    
                    <div id="gemini-info" class="ai-tool-info absolute inset-0 bg-teal-100/95 flex items-center justify-center p-4 rounded-xl text-center transition duration-500 ease-in-out opacity-0 transform translate-y-2 pointer-events-none">
                        <p class="text-teal-800 font-semibold text-lg">
                            <strong>수업 동기유발용 서사(Narrative) 생성, QBL 질문 설계, 토론 자료 분석</strong> 등 학습 콘텐츠를 기획/생성하는 핵심 AI 역할
                        </p>
                    </div>
                </div>

                <!-- Tool 3: 바이브코딩 (업데이트) -->
                <div class="ai-tool-card relative bg-white p-6 rounded-xl border-4 border-indigo-300 shadow-lg cursor-pointer transition duration-300 ease-in-out hover:border-indigo-500 hover:shadow-xl" onclick="toggleToolInfo('vibe')">
                    <h5 class="text-3xl font-black text-indigo-700 text-center">바이브코딩</h5>
                    <p class="text-center text-sm font-medium text-gray-500 mt-1">#인터랙션 #게임제작</p>
                    
                    <div id="vibe-info" class="ai-tool-info absolute inset-0 bg-indigo-100/95 flex items-center justify-center p-4 rounded-xl text-center transition duration-500 ease-in-out opacity-0 transform translate-y-2 pointer-events-none">
                        <p class="text-indigo-800 font-semibold text-lg">
                            <strong>[전체 융합]</strong> Gemini 콘텐츠와 Canva 디자인을 활용하여, 학생 참여를 유도하는 <strong>도덕 딜레마 인터랙티브 게임</strong>을 직접 제작
                        </p>
                    </div>
                </div>
            </div>
            <p class="text-center text-sm text-gray-500 mt-4">*(도구 상자를 클릭하면 연수에서의 구체적인 연계 역할이 나타납니다.)</p>
        </section>

        <!-- Final Call to Action Button -->
        <section class="mt-20 mb-10 text-center">
            <button 
                onclick="readyForTraining(this)"
                class="bg-pink-600 text-white text-3xl font-extrabold px-12 py-6 rounded-full shadow-2xl hover:bg-pink-700 transition duration-300 transform hover:scale-105 active:scale-95 border-b-4 border-pink-800 focus:outline-none focus:ring-4 focus:ring-pink-300"
            >
                연수 시작 준비되셨나요? 🚀 (클릭!)
            </button>
        </section>

    </main>

    <!-- Footer (z-index: 10) -->
    <footer class="bg-gray-800 py-6 mt-12">
        <div class="container mx-auto px-4 text-center text-white text-sm opacity-80">
            <p>월간 도덕 가을편 연수 관련 문의: 허니쌤 🍯</p>
            <p class="mt-1">2025년 10월 22일, 모두 함께 성장하는 도덕 수업 혁신을 기대합니다.</p>
        </div>
    </footer>

    <script>
        // --- 캔버스 기반 폭죽 시뮬레이션 로직 ---
        const canvas = document.getElementById('fireworksCanvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        const fireworks = [];
        const particles = [];
        let hue = 0; 

        function resizeCanvas() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            // 캔버스 배경은 투명하게 설정
            ctx.clearRect(0, 0, width, height); 
        }

        window.addEventListener('resize', resizeCanvas);
        
        function random(min, max) {
            return Math.random() * (max - min) + min;
        }

        class Particle {
            constructor(x, y, hue) {
                this.x = x;
                this.y = y;
                this.speed = random(1, 10);
                this.angle = random(0, 2 * Math.PI);
                this.vx = Math.cos(this.angle) * this.speed;
                this.vy = Math.sin(this.angle) * this.speed;

                this.friction = 0.95; 
                this.gravity = 0.5;  
                this.hue = random(hue - 50, hue + 50); 
                this.alpha = 1; 
                this.decay = random(0.015, 0.03); 
                this.size = random(1, 3);
            }

            update() {
                this.vx *= this.friction;
                this.vy *= this.friction;
                this.vy += this.gravity;
                this.x += this.vx;
                this.y += this.vy;
                this.alpha -= this.decay;
            }

            draw() {
                ctx.save();
                ctx.beginPath();
                ctx.fillStyle = `hsla(${this.hue}, 100%, 50%, ${this.alpha})`;
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }

        class Firework {
            constructor(startX, startY, targetX, targetY) {
                this.x = startX;
                this.y = startY;
                this.targetX = targetX;
                this.targetY = targetY;

                const distance = Math.sqrt(Math.pow(targetX - startX, 2) + Math.pow(targetY - startY, 2));
                const angle = Math.atan2(targetY - startY, targetX - startX);
                this.vx = Math.cos(angle) * (distance / 30); 
                this.vy = Math.sin(angle) * (distance / 30); 

                this.targetDistance = distance;
                this.distanceTraveled = 0;
                this.lineWidth = random(1, 3);

                this.hue = hue;
                this.brightness = random(50, 70);
                this.trail = []; 
                this.trailLength = 4;
            }

            get exploded() {
                // 목표를 지나쳤는지 여부 대신, 단순히 목표 지점보다 Y축이 작아지면 터지도록 함 (상승 폭죽)
                return this.y < this.targetY;
            }

            update() {
                if (this.exploded) return;

                this.trail.unshift({ x: this.x, y: this.y });
                if (this.trail.length > this.trailLength) {
                    this.trail.pop();
                }

                this.x += this.vx;
                this.y += this.vy;
            }

            draw() {
                ctx.save();
                
                // 꼬리 효과 그리기
                ctx.beginPath();
                ctx.moveTo(this.trail[0].x, this.trail[0].y);
                for(let i = 1; i < this.trail.length; i++) {
                    ctx.lineTo(this.trail[i].x, this.trail[i].y);
                }
                // 밝은 배경에서 잘 보이도록 꼬리 색상을 밝게 설정
                ctx.strokeStyle = `hsl(${this.hue}, 100%, 65%)`; 
                ctx.lineWidth = this.lineWidth;
                ctx.stroke();

                // 발사체 헤드 그리기
                ctx.beginPath();
                ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                ctx.fillStyle = `hsl(${this.hue}, 100%, ${this.brightness + 10}%)`;
                ctx.fill();

                ctx.restore();
            }

            burst() {
                const count = random(100, 200); 
                for (let i = 0; i < count; i++) {
                    particles.push(new Particle(this.x, this.y, this.hue));
                }
            }
        }


        function createFirework(targetX, targetY) {
            // 시작점은 버튼 아래, 화면 하단
            const startX = random(width / 2 - 100, width / 2 + 100);
            const startY = height;
            
            // 폭발 목표점을 약간 랜덤화
            const finalTargetX = random(targetX - 50, targetX + 50);
            const finalTargetY = random(targetY - 50, targetY + 50);

            fireworks.push(new Firework(startX, startY, finalTargetX, finalTargetY));
        }

        function animate() {
            hue = (hue + 0.5) % 360;

            // **중요 수정:** 캔버스를 완전히 지워 폭죽 잔상이 남지 않도록 합니다 (밝은 배경 유지).
            ctx.clearRect(0, 0, width, height);

            // --- 폭죽 업데이트 및 그리기 ---
            for (let i = fireworks.length - 1; i >= 0; i--) {
                const fw = fireworks[i];
                fw.update();
                fw.draw();

                if (fw.exploded) {
                    fw.burst();
                    fireworks.splice(i, 1);
                }
            }

            // --- 파티클 업데이트 및 그리기 ---
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.update();
                p.draw();

                if (p.alpha <= p.decay) {
                    particles.splice(i, 1);
                }
            }

            requestAnimationFrame(animate);
        }
        // --- 폭죽 시뮬레이션 로직 끝 ---
        
        // AI 도구 정보 토글 함수
        function toggleToolInfo(id) {
            const infoElement = document.getElementById(id + '-info');
            if (infoElement.style.opacity === '1') {
                infoElement.style.opacity = '0';
                infoElement.style.transform = 'translateY(2px)';
                infoElement.style.pointerEvents = 'none';
            } else {
                document.querySelectorAll('.ai-tool-info').forEach(el => {
                    if (el.id !== infoElement.id) {
                        el.style.opacity = '0';
                        el.style.transform = 'translateY(2px)';
                        el.style.pointerEvents = 'none';
                    }
                });
                infoElement.style.opacity = '1';
                infoElement.style.transform = 'translateY(0)';
                infoElement.style.pointerEvents = 'auto';
            }
        }


        // Countdown Timer Logic
        function startCountdown() {
            const targetDate = new Date('October 22, 2025 19:30:00 UTC+09:00').getTime();
            
            const timer = setInterval(function() {
                const now = new Date().getTime();
                const distance = targetDate - now;

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                const formatTime = (t) => String(t).padStart(2, '0');

                const daysEl = document.getElementById('days');
                const hoursEl = document.getElementById('hours');
                const minutesEl = document.getElementById('minutes');
                const secondsEl = document.getElementById('seconds');
                const countdownEl = document.getElementById('countdown');

                if (daysEl && hoursEl && minutesEl && secondsEl) {
                    daysEl.innerHTML = formatTime(days) + '<span class="block text-sm font-normal">일</span>';
                    hoursEl.innerHTML = formatTime(hours) + '<span class="block text-sm font-normal">시간</span>';
                    minutesEl.innerHTML = formatTime(minutes) + '<span class="block text-sm font-normal">분</span>';
                    secondsEl.innerHTML = formatTime(seconds) + '<span class="block text-sm font-normal">초</span>';
                }


                if (distance < 0) {
                    clearInterval(timer);
                    if (countdownEl) {
                        countdownEl.innerHTML = '<p class="text-3xl font-bold text-red-600 animate-pulse">🎉 연수가 시작되었습니다! 🎉</p>';
                    }
                }
            }, 1000);
        }

        // Final CTA 버튼 클릭 핸들러: 폭죽 트리거 및 페이지 상단 스크롤
        function readyForTraining(buttonElement) {
            // 1. 캔버스 폭죽 효과 트리거
            const explosionCount = random(5, 10); // 5~10개의 폭죽을 한 번에 발사
            
            // 폭죽이 화면 상단 (뒷쪽/하늘)에서 터지도록 목표 지점 설정
            const targetAreaYMin = height * 0.1; // 화면 높이의 10% 지점
            const targetAreaYMax = height * 0.3; // 화면 높이의 30% 지점

            // 폭발을 화면 상단 중앙 영역에 분산
            const targetAreaXMin = width * 0.2;
            const targetAreaXMax = width * 0.8;

            for (let i = 0; i < explosionCount; i++) {
                // 상단 중앙에서 무작위 X 좌표
                const targetX = random(targetAreaXMin, targetAreaXMax); 
                // 상단 10%~30% 영역에서 무작위 Y 좌표
                const targetY = random(targetAreaYMin, targetAreaYMax);
                
                createFirework(targetX, targetY);
            }
            
            // 2. 페이지 스크롤
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
            console.log("연수 준비 완료! 폭죽 효과를 시작하고 페이지 상단으로 스크롤했습니다.");
        }
        
        // ----------------------------------------------------
        // 인권/공존 미니 게임 로직
        // ----------------------------------------------------
        const dilemmas = [
            {
                scenario: "새로 이사 온 이웃이 종교적인 이유로 매일 아침 큰 소리로 기도합니다. 나의 휴식 권리와 이웃의 종교의 자유가 충돌합니다. 어떻게 생각하시나요?",
                optionA: "조용히 해달라고 정중하게 요청한다 (나의 권리 우선)",
                reflectionA: "나의 휴식 권리도 중요합니다. 하지만 요청 시 이웃의 종교적 관습을 존중하는 태도가 필요합니다. 공존은 상호 이해와 대화에서 시작됩니다.",
                optionB: "내가 참고, 소음 방지용 귀마개를 사용한다 (이웃의 권리 우선)",
                reflectionB: "배려하는 마음은 훌륭합니다. 하지만 지속적인 일방적 희생은 관계를 해칠 수 있습니다. 대화를 통해 서로 타협점을 찾는 것이 진정한 공존입니다.",
            },
            {
                scenario: "학교 복도에 휠체어를 사용하는 친구를 위한 경사로 설치가 필요하지만, 공간이 좁아 일반 학생들의 통행이 다소 불편해집니다. 누구의 권리가 더 중요할까요?",
                optionA: "모두의 통행 편의를 우선하여 경사로를 설치하지 않는다 (다수의 공존)",
                reflectionA: "다수의 편의를 고려하는 것은 합리적입니다. 그러나 소외된 이웃의 권리를 보장하는 것이 진정한 인권입니다. 불편함을 감수하는 배려가 필요합니다.",
                optionB: "휠체어 친구의 접근권을 우선하여 경사로를 설치한다 (소수의 인권)",
                reflectionB: "소수의 인권을 보호하는 것은 민주시민의 기본입니다. 공동체 전체가 이 불편함을 어떻게 나눌지 함께 고민하는 것이 공존의 시작입니다.",
            },
            {
                scenario: "동네 공원에서 반려동물을 싫어하는 사람들의 민원 때문에, 산책 시 목줄 외 입마개 착용이 의무화될 상황입니다. (필수 견종 아님)",
                optionA: "민원인들의 권리를 위해 입마개 의무화에 찬성한다 (안전 우선)",
                reflectionA: "안전을 중요시하는 것은 물론 중요합니다. 하지만 불필요한 규제가 동물권과 소수(반려인)의 권리를 침해하지 않도록 균형 잡힌 시각이 필요합니다.",
                optionB: "규제 강화에 반대하고, 목줄만 의무화한다 (반려인의 권리 우선)",
                reflectionB: "규제를 최소화하여 자유를 보장하는 것은 좋지만, 공존을 위해서는 타인의 불안감을 해소할 수 있는 현실적인 타협안을 함께 모색해야 합니다.",
            },
            {
                scenario: "Gemini와 같은 AI 도구를 활용해 수업 자료를 순식간에 만들 수 있지만, 자료를 직접 분석하며 얻는 깊이 있는 이해와 비판적 사고 능력을 잃을까 걱정됩니다.",
                optionA: "자료 제작 시간 단축을 위해 AI를 전면 활용하고 효율성을 극대화한다.",
                reflectionA: "효율성은 중요하지만, 교사의 비판적 관점이 자료에 녹아들어야 학생의 사고를 확장시킬 수 있습니다. AI를 단순 자료 생성기가 아닌 '보조 연구원'으로 활용하여 최종 검토에 집중해야 합니다.",
                optionB: "AI 사용을 최소화하고 자료를 직접 구성하는 데 시간을 더 투자하여 사고의 깊이를 확보한다.",
                reflectionB: "깊이 있는 이해는 중요하지만, 무한정 시간을 쏟을 수는 없습니다. AI를 활용해 초안을 잡고, 그 초안을 비판적으로 수정/보완하는 '협업' 방식이 교사의 효율과 전문성을 동시에 높이는 최적의 경로입니다.",
            },
            {
                scenario: "수업 자료를 Canva나 바이브코딩으로 매우 시각적이고 인터랙티브하게 만들 수 있지만, 도구 사용법이 복잡해 다른 선생님들이 자료 공유나 재활용을 어려워합니다.",
                optionA: "도구의 복잡성을 감수하고 학생 몰입을 위한 최고 수준의 시각적 자료를 만든다.",
                reflectionA: "학생들의 몰입도 극대화는 좋지만, 동료 교사와의 협력과 자료 공유의 용이성도 중요합니다. 자료는 단순하고 핵심적인 내용을 담아, 확장 가능성이 있도록 만드는 것이 전문성 공유 측면에서 바람직합니다.",
                optionB: "PowerPoint 등 기본적인 도구로만 자료를 만들어 공유의 편의성을 최우선으로 높인다.",
                reflectionB: "공유의 편의성은 높지만, 학생들의 흥미를 유발하는 인터랙티브 요소를 포기하는 것은 아쉽습니다. 에듀테크는 '도구의 장벽'을 낮추면서도 '참여의 깊이'를 높이는 방향으로 활용되어야 합니다. 최소한의 도구로 최대한의 효과를 내는 방법을 고민해야 합니다.",
            }
        ];
        
        let currentDilemmaIndex = 0;

        const gameInterfaceHTML = `
            <h4 class="text-2xl font-bold text-indigo-900 mb-4 text-center">문제 <span id="current-question">1</span></h4>
            
            <!-- 딜레마 상황 표시 영역 -->
            <div class="bg-indigo-50 p-6 rounded-lg mb-6 border border-indigo-200">
                <p id="scenario-text" class="text-xl font-medium text-gray-800 text-center">
                    로딩 중...
                </p>
            </div>

            <!-- 선택 버튼 영역 -->
            <div id="choice-buttons" class="flex flex-col space-y-4">
                <button id="btn-optionA" class="game-btn game-btn-A" onclick="handleChoice('A')">선택지 A</button>
                <button id="btn-optionB" class="game-btn game-btn-B" onclick="handleChoice('B')">선택지 B</button>
            </div>
        `;

        function showCompletionMessage() {
            const container = document.getElementById('dilemma-container');
            container.innerHTML = `
                <p class="text-2xl font-bold text-indigo-600 mb-4 text-center">게임 완료! ✅</p>
                <p class="text-lg text-gray-700 text-center">모든 딜레마를 완료하셨습니다. 연수에서 더 심도 깊은 '질문 기반 탐구학습(QBL)'을 경험해 보세요!</p>
                <button class="mt-6 w-full p-3 rounded-lg bg-teal-500 text-white font-bold hover:bg-teal-600 transition duration-300" onclick="resetGame()">다시 시작하기</button>
            `;
        }


        function loadDilemma() {
            const container = document.getElementById('dilemma-container');
            
            if (currentDilemmaIndex >= dilemmas.length) {
                showCompletionMessage();
                document.getElementById('result-area').classList.add('hidden');
                return;
            }

            if (!document.getElementById('current-question')) {
                container.innerHTML = gameInterfaceHTML;
                document.getElementById('result-area').classList.add('hidden');
            }

            const dilemma = dilemmas[currentDilemmaIndex];

            document.getElementById('current-question').textContent = currentDilemmaIndex + 1;
            document.getElementById('scenario-text').textContent = dilemma.scenario;
            document.getElementById('btn-optionA').textContent = dilemma.optionA;
            document.getElementById('btn-optionB').textContent = dilemma.optionB;

            document.getElementById('result-area').classList.add('hidden');
            document.getElementById('choice-buttons').classList.remove('hidden');
        }

        function handleChoice(choice) {
            const dilemma = dilemmas[currentDilemmaIndex];
            const reflectionTextElement = document.getElementById('reflection-text');
            const resultArea = document.getElementById('result-area');
            const nextButton = document.getElementById('next-button');

            if (choice === 'A') {
                reflectionTextElement.innerHTML = `<strong>선택: ${dilemma.optionA}</strong><br><br>${dilemma.reflectionA}`;
            } else if (choice === 'B') {
                reflectionTextElement.innerHTML = `<strong>선택: ${dilemma.optionB}</strong><br><br>${dilemma.reflectionB}`;
            }

            document.getElementById('choice-buttons').classList.add('hidden');
            resultArea.classList.remove('hidden');

            if (currentDilemmaIndex === dilemmas.length - 1) {
                nextButton.textContent = "게임 종료하기";
            } else {
                nextButton.textContent = "다음 문제로";
            }
        }

        function loadNextDilemma() {
            currentDilemmaIndex++;
            loadDilemma();
        }

        function resetGame() {
            currentDilemmaIndex = 0;
            loadDilemma();
        }

        // 페이지 로드 시 카운트다운 및 게임 시작, 그리고 캔버스 애니메이션 시작
        window.onload = function() {
            startCountdown();
            loadDilemma(); // 게임 시작

            // 캔버스 애니메이션 초기화 및 시작
            resizeCanvas(); 
            animate();
        };
    </script>
</body>
</html>
